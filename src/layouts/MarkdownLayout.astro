---
import BaseLayout from "./BaseLayout.astro";

const { frontmatter } = Astro.props;
---

<BaseLayout
	title={frontmatter.title + " | blog.daniel-armenta.com"}
	padding={0}
>
	<img src={frontmatter.heroImage} transition:name={frontmatter.heroImage} />
	<img src={frontmatter.heroImage} class="invisible" />
	<div class="bg">
		<div class="content">
			<p class="published">Published {frontmatter.pubDate}</p>
			<h1>{frontmatter.title}</h1>
			<slot />
		</div>
	</div>

	<Fragment slot="head">
		<style lang="scss">
			html {
				scroll-behavior: smooth;
			}

			.bg {
				background-color: var(--background);
			}

			.content {
				width: clamp(200px, 90%, 800px);
				margin: 0px auto;
				padding: 1.5rem;

				:global(p) {
					text-align: justify;
				}

				:global(h1, h2, h3, h4, h5, h6) {
					color: var(--accent);
				}

				:global(table, tr, td, th) {
					border: 1px solid;
					padding: 0.5rem;
				}

				:global(table) {
					width: 80%;
					margin: 1rem auto;
					border-collapse: collapse;
				}

				:global(thead) {
					background-color: var(--primary);
				}

				:global(img) {
					width: 100%;
					border-radius: 1rem;
				}

				:global(pre) {
					padding: 2rem;
					margin: 1rem;
					border-radius: 0.5rem;
					font-size: medium;
				}

				:global(a) {
					color: var(--primary);
				}

				:global(blockquote) {
					border-left: 1px solid var(--primary);
					padding: 1.5rem;
					margin: 0.5px;
				}

				:global(li::marker) {
					color: var(--accent);
				}

				:global(.code-container) {
					margin-top: 1rem;

					:global(*) {
						background-color: var(--code-bg);
					}
					:global(pre) {
						margin: 0px;
						border-top-left-radius: 0px;
					}

					:global(p) {
						color: var(--code-color);

						width: min-content;
						min-width: 6rem;
						padding: 0.5rem;
						border-top-right-radius: 1rem;
						border-top-left-radius: 1rem;
						font-size: 1.5rem;
					}
				}
			}

			h1 {
				padding: 2rem;
			}

			img {
				width: 100%;
				position: fixed;
				z-index: -1;
			}

			img.invisible {
				position: unset;
				opacity: 0;
			}

			p.published {
				opacity: 0.6;
			}

			:global(div.heading-div) {
				display: flex;

				:global(a) {
					display: flex;
					opacity: 0;

					transition-property: opacity;

					:global(img) {
						margin: auto;
					}
				}

				&:hover {
					:global(a) {
						opacity: 1;
					}
				}
			}
			:global(:root[data-theme="light"]) {
				:global(div.heading-div > a > img) {
					filter: hue-rotate(70deg) saturate(70%) brightness(2.5);
				}
			}

			:global(:root[data-theme="dark"]) {
				:global(div.heading-div > a > img) {
					filter: hue-rotate(60deg) saturate(60%) brightness(4);
				}
			}
		</style>
	</Fragment>
</BaseLayout>
